BranchesBox:
    orientation: 'vertical'
    branchlist: branchlist
    currentbranchbox: currentbranchbox
    newbranchbox: newbranchbox
    currentbranchboxparent: currentbranchboxparent
    currentbranchlabelbox: currentbranchlabelbox

    repobranchlabel: repobranchlabel
    repobranchedit: repobranchedit
    repobranchsha: repobranchsha
    repobranchtext: repobranchtext
    branchdate: branchdate
    branchmenubutton: branchmenubutton.__self__
    ispublished: ispublished.__self__


    CustomLabel:
        text: '[color=000000][b][size=13]Branches[/size][/b][/color]'
        text_size: self.width, self.height
        valign: 'middle'
        halign: 'left'
        size_hint: 1.0, None
        height: '30dp'
        padding_x: '3dp'

    BoxLayout:
        size_hint: 1.0, None
        height: '100dp'
        id: currentbranchboxparent

        CustomLabel:
            size_hint: None, 1.0
            width: '10dp'

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1.0, None
            height: '100dp'
            id: currentbranchbox

            CustomLabel:
                canvas.before:
                    Color:
                        rgb: .8,.8,.8
                    Rectangle:
                        id: rectangle
                        pos: self.pos
                        size: self.size
                text: "[color=606060][size=12]Current Branch[/size][/color]"
                size_hint: 1.0, None
                height: '30dp'
                text_size: self.width, self.height
                valign: 'middle'
                halign: 'left'

            BoxLayout:
                canvas.before:
                    Color:
                        rgb: .9,.9,.9
                    Rectangle:
                        id: rectangle
                        pos: self.pos
                        size: self.size
                orientation: 'horizontal'
                height: '35sp'
                size_hint_y: None
                id: currentbranchlabelbox

                CustomLabel:
                    id: repobranchlabel
                    text: "[color=202020][size=13][b]%s[/b][/size][/color]"%root.name
                    path: ""
                    size_hint: None, 1.0
                    width: '90dp'
                    valign: 'middle'
                    halign: 'left'
                    padding_x: '10dp'
                    text_size: self.width, self.height
                    shorten: True

                BoxLayout:
                    id: repobranchedit
                    size_hint_x: None
                    width: '90dp'

                    CustomLabel:
                        size_hint: None, 1.0
                        width: '5dp'

                    CustomTextInput:
                        text: "%s"%root.name
                        name: "edit"
                        bold: True
                        markup: True
                        size_hint: None, None
                        size: '80dp', '20dp'
                        multiline: False
                        font_size: 12
                        focus: True
                        cursor_blink: True
                        padding: 6,2,6,2
                        font_name: default_font_name
                        pos_hint: {'x':0.5, 'y':0.20}

                    CustomLabel:
                        size_hint: None, 1.0
                        width: '5dp'

                CustomLabel:
                    id: repobranchsha
                    text: "[size=11][color=555555]: %s[/color][/size]"%root.sha
                    path: ""
                    size_hint: None, 1.0
                    width: '60dp'
                    valign: 'middle'
                    halign: 'left'
                    text_size: self.width, self.height
                    shorten: True
                CustomLabel:
                    id: repobranchtext
                    text: "[color=202020][size=13][b]%s[/b]: [color=555555]%s[/color][/size][/color]"%(root.commiter, root.subject)
                    path: ""
                    valign: 'middle'
                    halign: 'left'
                    padding_x: '10dp'
                    text_size: self.width, self.height
                    strip: True
                    shorten: True

                CustomLabel:
                    id: branchdate
                    text: "[color=555555][size=10]%s[/size][/color]"%root.date
                    size_hint: None, 1.0
                    width: '55dp'
                    valign: 'middle'
                    halign: 'right'

                BranchMenuButton:
                    canvas.before:
                        Color:
                            rgb: .9,.9,.9
                        Rectangle:
                            id: rectangle
                            pos: self.pos
                            size: self.size
                    id: branchmenubutton
                    background_color: .7, .7, .9, .5
                    size_hint_x: None
                    width: '35dp'
                    font_name: iconic_font_name
                    text: ""#""

                BoxLayout:
                    id: ispublished
                    size_hint: None, 1.0
                    width: '70dp'

                    CustomLabel:
                        canvas.before:
                            Color:
                                rgb: .8,.8,.8
                            Rectangle:
                                id: rectangle
                                pos: self.pos
                                size: self.size
                        size_hint: None, 1.0
                        width: '10dp'

                    PushUnpushButton:
                        text: 'Pushed' if root.published else 'Push'
                        size_hint: None, 1.0
                        width: '60dp'
                        font_size: 12
                        background_color: (.7,.7,.9,.8) if root.published else (.7,.7,.9,.5)
                        is_published: root.published

            BoxLayout:
                size_hint: 1.0, None
                height: '30dp'
                name: "newbranch"
                id: newbranchbox
                BoxLayout:
                    orientation: 'vertical'

                    CustomLabel:
                        size_hint: 1.0, None
                        height: '1dp'

                    BoxLayout:
                        CustomLabel:
                            size_hint: None, 1.0
                            width: '10dp'

                        BoxLayout:
                            canvas.before:
                                Color:
                                    rgb: .9,.9,.9
                                Rectangle:
                                    id: rectangle
                                    pos: self.pos
                                    size: self.size
                            CustomLabel:
                                size_hint: 0.4, 1.0
                                valign: 'middle'
                                halign: 'left'
                                text_size: self.width, self.height
                                strip: True
                                shorten: True
                                padding_x: '10dp'
                                text: "[size=11][color=555555][font=assets/fonts/fontawesome-webfont.ttf][/font] Create a new branch off %s[/color][/size]"%root.name

                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_x: .6

                                CustomLabel:
                                    size_hint: None, 1.0
                                    width: '5dp'

                                CustomTextInput:
                                    multiline: False
                                    font_size: 11
                                    size_hint: None, None
                                    size: '130dp', '20dp'
                                    focus: True
                                    cursor_blink: True
                                    hint_text: 'branch name'
                                    padding: 6,2,6,2
                                    font_name: default_font_name
                                    name: "new"

                                CustomLabel:
                                    size_hint: None, 1.0
                                    width: '5dp'


                        CustomLabel:
                            size_hint: None, 1.0
                            width: '80dp'


        CustomLabel:
            size_hint: None, 1.0
            width: '10dp'

    CustomLabel:
        canvas.before:
            Color:
                rgb: .8,.8,.8
            Rectangle:
                id: rectangle
                pos: self.pos
                size: self.size
        text: "[color=606060][size=12]Other Branches[/size][/color]"
        size_hint: 1.0, None
        height: '30dp'
        text_size: self.width, self.height
        valign: 'middle'
        halign: 'left'
        padding_x: '10dp'

    BoxLayout:
        CustomLabel:
            size_hint: None, 1.0
            width: '10dp'
        ListView:
            id: branchlist
            adapter: ListAdapter(data=root.branches, cls=Factory.BranchesItem, args_converter=root.args_converter)
        CustomLabel:
            size_hint: None, 1.0
            width: '10dp'